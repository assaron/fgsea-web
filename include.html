<div id="popup1" class="overlay">
	<div class="popup">
		<p id="caption"></p>
		<a class="close">&times;</a>
		<img id="plot" class="modal-content" onerror="imgError(this)">
	</div>
</div>

<script>

var modal = document.getElementById('popup1');
var closebtn = document.getElementsByClassName('close')[0];

btnclick = function(pathway) {
    sendPathway(pathway);
    document.getElementById('caption').innerHTML = pathway;
    document.getElementById('plot').src = pathway + '_plot.png';
    modal.style.display = "inline-block";
}

closebtn.onclick = function() {
    modal.style.display = "none";
}
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

function imgError(image) {
    image.onerror = null;
    setTimeout(function (){
        image.src = image.src;
     }, 3000);
}

sendPathway = function(pathway){
  Shiny.onInputChange("JsMessage", pathway);
}
</script>
